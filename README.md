# News Portal — новостной портал с подписками и рассылками

## Описание проекта

News Portal — это веб-приложение на Django, позволяющее создавать и управлять новостями и статьями. Пользователи могут читать новости, подписываться на категории и получать уведомления о новых материалах по электронной почте.

---

## Основной функционал

- Модели:
  - **Author** — профиль автора, связанный с пользователем, с рейтингом
  - **Category** — категории новостей (спорт, политика, и т.д.), уникальные названия
  - **Post** — новости и статьи с типом (новость или статья), связью с автором и категориями, рейтингом
  - **PostCategory** — промежуточная модель связи многие-ко-многим между Post и Category
  - **Comment** — комментарии к постам с рейтингом, датой и пользователем

- Методы моделей:
  - `like()` и `dislike()` для изменения рейтинга постов и комментариев
  - `preview()` в Post для получения первых 124 символов текста с многоточием
  - `update_rating()` в Author для пересчёта рейтинга автора на основе постов и комментариев
  - 
- Интерфейс и страницы
   - /news/ — список всех новостей и статей с пагинацией (10 на страницу), отображается заголовок, дата и первые 20 символов текста
    
   - /news/<int:pk>/ — детальная страница новости или статьи с полным текстом и датой в формате дд.мм.гггг
    
   - Фильтр censor — замена нежелательных слов в заголовках и тексте на символ *
    
   - Страницы создания, редактирования и удаления новостей:
    
   - /news/create/ — создание новости
    
   - /news/<int:pk>/update/ — редактирование новости
    
   - /news/<int:pk>/delete/ — удаление новости
    
    Страницы создания, редактирования и удаления статей:
    
    - /articles/create/ — создание статьи
    
    - /articles/<int:pk>/update/ — редактирование статьи
    
   - /articles/<int:pk>/delete/ — удаление статьи
    
    Страница поиска новостей и статей с фильтрами по названию, категории и дате:
    
    - /news/search/

- Управление правами:
  - Группы пользователей `common` и `authors`
  - Автоматическое добавление новых пользователей в `common`
  - Возможность стать автором и получить права на создание/редактирование Post
  - Ограничения доступа к страницам с помощью миксинов и атрибутов классов

- Аутентификация:
  - Регистрация, вход, выход
  - Регистрация через Google (allauth)
  - Приветственные письма при регистрации

- Подписки и рассылки:
  - Подписка пользователей на категории новостей
  - Мгновенные email-уведомления при добавлении новой статьи в подписанную категорию с ссылкой на статью
  - Еженедельные рассылки новых статей по подпискам (каждый понедельник в 8:00)
  
- Кэширование статей для оптимизации производительности — пока статья не изменена, берётся из кэша

- Настройка Redis и Celery для обработки фоновых задач и рассылок

---

## Использованные технологии

- Django 5.0.1  
- Django REST Framework  
- django-allauth  
- django-filter  
- drf-yasg (автогенерация OpenAPI документации)  
- Redis  
- Celery  
- APScheduler  
- PostgreSQL  
- Python 3.11+  
- Python библиотеки: requests, urllib3, PyJWT, python-dotenv и др.

---

## Установка и запуск

```bash
git clone https://github.com/suvorova-ya/News-Portal.git
cd News-Portal

python -m venv venv
source venv/bin/activate  # Windows: venv\\Scripts\\activate

pip install -r requirements.txt

python manage.py migrate
python manage.py createsuperuser

# Запуск Redis (локально, если установлен)
redis-server

# Запуск Celery worker в отдельном терминале
celery -A news_portal worker -l info

# Запуск планировщика задач (APScheduer)
python manage.py runapscheduler

# Запуск сервера Django
python manage.py runserver
